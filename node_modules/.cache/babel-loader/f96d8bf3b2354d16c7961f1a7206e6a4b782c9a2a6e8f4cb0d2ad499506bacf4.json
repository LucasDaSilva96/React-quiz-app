{"ast":null,"code":"import{createContext,useReducer,useEffect,useContext}from\"react\";import QUESTIONS from\"../../data/data\";import{jsx as _jsx}from\"react/jsx-runtime\";const SECS_PER_QUESTION=30;const QuestionContext=/*#__PURE__*/createContext();const initialState={questions:[],// loading, error, ready, active, finished\nstatus:\"loading\",index:0,answer:null,points:0,highScore:0,secondsRemaining:null};function reducer(state,action){switch(action.type){case\"dataReceived\":return{...state,questions:action.payload,status:\"ready\"};case\"dataFailed\":return{...state,status:\"error\"};case\"start\":return{...state,status:\"active\",secondsRemaining:state.questions.length*SECS_PER_QUESTION};case\"newAnswer\":const question=state.questions.at(state.index);return{...state,answer:action.payload,points:action.payload===question.correctOption?state.points+question.points:state.points};case\"nextQuestion\":return{...state,index:state.index+1,answer:null};case\"finish\":return{...state,status:\"finished\",highScore:state.points>state.highScore?state.points:state.highScore};case\"restart\":return{...state,status:\"ready\",index:0,answer:null,points:0,secondsRemaining:300};case\"tick\":return{...state,secondsRemaining:state.secondsRemaining-1,status:state.secondsRemaining===0?\"finished\":state.status};default:throw new Error(\"Unknown action\");}}function QuizProvider(_ref){let{children}=_ref;const[{questions,status,index,answer,points,highScore,secondsRemaining},dispatch]=useReducer(reducer,initialState);const numQuestions=questions.length;const maxPossiblePoints=questions.reduce((prev,curr)=>prev+curr.points,0);useEffect(function(){async function getQuestions(){try{const res=QUESTIONS;dispatch({type:\"dataReceived\",payload:res});}catch(err){dispatch({type:\"dataFailed\"});console.error(err.message);}}getQuestions();},[]);return/*#__PURE__*/_jsx(QuestionContext.Provider,{value:{questions,status,index,answer,points,highScore,secondsRemaining,numQuestions,maxPossiblePoints,dispatch},children:children});}function useQuiz(){const context=useContext(QuestionContext);if(context===undefined)throw new Error(\"QuestionsContext was used outside of the QuizProvider\");return context;}export{QuizProvider,useQuiz};","map":{"version":3,"names":["createContext","useReducer","useEffect","useContext","QUESTIONS","jsx","_jsx","SECS_PER_QUESTION","QuestionContext","initialState","questions","status","index","answer","points","highScore","secondsRemaining","reducer","state","action","type","payload","length","question","at","correctOption","Error","QuizProvider","_ref","children","dispatch","numQuestions","maxPossiblePoints","reduce","prev","curr","getQuestions","res","err","console","error","message","Provider","value","useQuiz","context","undefined"],"sources":["C:/Users/dasil/React-Course-2023/ultimate-react-course/10-react-quiz/react-quiz/src/components/context/QuizContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect, useContext } from \"react\";\r\nimport QUESTIONS from \"../../data/data\";\r\n\r\nconst SECS_PER_QUESTION = 30;\r\nconst QuestionContext = createContext();\r\n\r\nconst initialState = {\r\n  questions: [],\r\n  // loading, error, ready, active, finished\r\n  status: \"loading\",\r\n  index: 0,\r\n  answer: null,\r\n  points: 0,\r\n  highScore: 0,\r\n  secondsRemaining: null,\r\n};\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"dataReceived\":\r\n      return { ...state, questions: action.payload, status: \"ready\" };\r\n    case \"dataFailed\":\r\n      return { ...state, status: \"error\" };\r\n\r\n    case \"start\":\r\n      return {\r\n        ...state,\r\n        status: \"active\",\r\n        secondsRemaining: state.questions.length * SECS_PER_QUESTION,\r\n      };\r\n\r\n    case \"newAnswer\":\r\n      const question = state.questions.at(state.index);\r\n\r\n      return {\r\n        ...state,\r\n        answer: action.payload,\r\n        points:\r\n          action.payload === question.correctOption\r\n            ? state.points + question.points\r\n            : state.points,\r\n      };\r\n\r\n    case \"nextQuestion\":\r\n      return { ...state, index: state.index + 1, answer: null };\r\n\r\n    case \"finish\":\r\n      return {\r\n        ...state,\r\n        status: \"finished\",\r\n        highScore:\r\n          state.points > state.highScore ? state.points : state.highScore,\r\n      };\r\n\r\n    case \"restart\":\r\n      return {\r\n        ...state,\r\n        status: \"ready\",\r\n        index: 0,\r\n        answer: null,\r\n        points: 0,\r\n        secondsRemaining: 300,\r\n      };\r\n\r\n    case \"tick\":\r\n      return {\r\n        ...state,\r\n        secondsRemaining: state.secondsRemaining - 1,\r\n        status: state.secondsRemaining === 0 ? \"finished\" : state.status,\r\n      };\r\n    default:\r\n      throw new Error(\"Unknown action\");\r\n  }\r\n}\r\n\r\nfunction QuizProvider({ children }) {\r\n  const [\r\n    { questions, status, index, answer, points, highScore, secondsRemaining },\r\n    dispatch,\r\n  ] = useReducer(reducer, initialState);\r\n\r\n  const numQuestions = questions.length;\r\n  const maxPossiblePoints = questions.reduce(\r\n    (prev, curr) => prev + curr.points,\r\n    0\r\n  );\r\n\r\n  useEffect(function () {\r\n    async function getQuestions() {\r\n      try {\r\n        const res = QUESTIONS;\r\n        dispatch({ type: \"dataReceived\", payload: res });\r\n      } catch (err) {\r\n        dispatch({ type: \"dataFailed\" });\r\n        console.error(err.message);\r\n      }\r\n    }\r\n    getQuestions();\r\n  }, []);\r\n\r\n  return (\r\n    <QuestionContext.Provider\r\n      value={{\r\n        questions,\r\n        status,\r\n        index,\r\n        answer,\r\n        points,\r\n        highScore,\r\n        secondsRemaining,\r\n        numQuestions,\r\n        maxPossiblePoints,\r\n        dispatch,\r\n      }}\r\n    >\r\n      {children}\r\n    </QuestionContext.Provider>\r\n  );\r\n}\r\n\r\nfunction useQuiz() {\r\n  const context = useContext(QuestionContext);\r\n  if (context === undefined)\r\n    throw new Error(\"QuestionsContext was used outside of the QuizProvider\");\r\n  return context;\r\n}\r\n\r\nexport { QuizProvider, useQuiz };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}